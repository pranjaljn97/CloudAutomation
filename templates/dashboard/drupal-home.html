{% extends "dashboard/phpform.html" %}
{% load static %}
{% block content %}


  
                  <script type="text/javascript">
                    function ShowHideDiv() {
                        var ddlPassport = document.getElementById("ddlPassport");
                        var dvPassport = document.getElementById("dvPassport");
                        dvPassport.style.display = ddlPassport.value == "private" ? "block" : "none";
                        dvPassport.style.display = ddlPassport.value == "private" ? "block" : "none";
                    }
                    function ShowHideDiv2() {
                        var filepass = document.getElementById("filepass");
                        var fileopt = document.getElementById("fileopt");
                        fileopt.style.display = filepass.value == 'true' ? "block" : "none";
                        

                    }
                  </script>
                  <div class="content">
                  
                      <form id="regForm" action="." method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                          <!-- One "tab" for each step in the form: -->
                          <h2>PHP Application Stack</h2>
  <!-- ================================STEP 1 BASIC DETAILS======================================= -->
                          <div class="tab">Drupal | Wordpress | Magento | Custom PHP Application
                                
                            <div class="row">
                              <div class="col-md-5">
                                <div class="form-group">
                                  <label>Requester
                                  </label>
                                  <input type="text" class="form-control" readonly placeholder="{{ user.email }}" value="{{ user.email }}" name="requester">
                                </div>
                              </div>
                              <div class="col-md-2">
                                <div class="form-group">
                                  <label>Platform
                                  </label>
                                  <input type="text" class="form-control" readonly placeholder="PHP" value="PHP" name="platform">
                                </div>
                              </div>
                              <div class="col-md-3">
                                <div class="form-group">
                                  <label for="exampleInputEmail1">Environment Type
                                  </label>
                                  <input type="text" class="form-control" readonly  placeholder="Docker" value="Docker" name="envtype">
                                </div>
                              </div>

                              <!-- <div class="col-md-2">
                                <div class="form-group">
                                  <label>Choose Host</label>
                                  <select name=hostIp>
                                   
                                    {% for i in hostInfo %}
                                      {% if i.status == 'Deployed Successfully' %}
                                    <option value ="{{ i.hostIp }}">{{ i.hostIdentifier }}</option>
                                      {% endif %}
                                    {% endfor %}  
                                  </select>
                                  
                                </div>
                              </div> -->
                            </div>
                                              <div class="row">
                                                
                                                <div class="col-md-6">
                                                    <span style="color: red">{{form.project_name.errors}}
                                                      </span>
                                                  <div class="form-group">
                                                    <label>Project Name
                                                    </label>
                                                    <input type="text" class="form-control" required placeholder="Name of your project" name='project_name'>
                                                  </div>
                                                </div>
                                                <div class="col-md-6">
                                                  <div class="form-group">
                                                    <label>Application Name
                                                    </label>
                                                    <input type="text" class="form-control" required placeholder="Name of your application"  name='application_name'>
                                                  </div>
                                                </div>
                                              </div>

                                                                                  
                                              <div class="row">

                                                
                                                  <div class="col-md-6">
                                                    <div class="form-group">
                                                  
                                                      <label>Repo Type &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                                                     
                                                      <select id = "ddlPassport" name="repo_type" onchange = "ShowHideDiv()">
                                                          <option value="public">Public</option>
                                                          <option value="private">Private</option>  
                                                      </select>
                                                    
                                                    </div>
                                                  </div>
                                                                                    
                                                    
                                                  </div>


                                              

                                              <div class="row">

                                             
                                                <div class="col-md-6">
                                                  <div class="form-group">
                                                    <label>Git URL
                                                    </label>
                                                    <input type="url" class="form-control" placeholder="Enter the git SSH url of gitlab.intelligrape.net" name='git_url' required>
                                                  </div>
                                                </div>
                                                                                  
                                                  <div class="col-md-6">
                                                    <div class="form-group">
                                                      <label>Branch Name
                                                      </label>
                                                      <input type="text" class="form-control" placeholder="GIT Branch" name="git_branch">
                                                    </div>
                                                  </div>
                                                </div>
                                                <div class="row" id="dvPassport" style="display: none">
                                                <div class="col-md-6">
                                                  <div class="form-group">
                                                    <label>Git Username
                                                    </label>
                                                    <input type="text" class="form-control" placeholder="Enter Git Username" name='git_username'>
                                                  </div>
                                                </div>
                                                                                  
                                                  <div class="col-md-6">
                                                    <div class="form-group">
                                                      <label>Token
                                                      </label>
                                                      <input type="text" class="form-control" placeholder="Git Token" name="git_token">
                                                    </div>
                                                  </div>
                                                </div>
                                                
                              </div>
          <!-- ================================STEP 2 PHP NGINX DETAILS================================== -->                  
                            <div class="tab">PHP-Nginx
                            
                                <div class="row">
                                  <div class="col-md-6">
                                    <div class="form-group">
                                      <label> Version  </label>
                                      <select name="PHP_VERSION">

                                      {% for value in data.nginx_php.version %}
                                      <option value={{ value }}>{{ value }}
                                        </option>
                                      {% endfor %}

                                      </select>
                                      </div>
                                   
                                        <label>Upload an Env File &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
                                          <select id = "filepass" name="fileopp" onchange = "ShowHideDiv2()">
                                              <option value="false">No</option>
                                              <option value="true">Yes</option>  
                                          </select>
                                    
                                      <div id="fileopt" style="display: none">
                                      <input type = "file" placeholder = "document" name = "document" accept=".json"/>
                                      </div>
                                      
                                   
                                  </div>
                                  
                                </div>
                                <div class="row">

                                </div>
                                <div class="row">
                                  <hr>
                                  <div class="header">
                                    <h3 class="title">
                                        Environment Variables
                                    </h3>
                                    </div>
                                </div>
                                <br>
                               
                                <div class="row">
                                  <span style="color: red">{{form.project_name.errors}}
                                  </span>
                                  <div class="col-md-6">
                                    <div class="form-group">
                                      <label>Key #3
                                      </label>
                                      <input type="text" class="form-control" value="NGINX_SERVER_ROOT" name='NGINX_SERVER_ROOT' disabled>
                                    </div>
                                  </div>
                                  <div class="col-md-6">
                                    <div class="form-group">
                                      <label>Value #3
                                      </label>
                                      <input type="text" class="form-control" name='NGINX_SERVER_ROOT_VALUE' value='/var/www/html/'>
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <span style="color: red">{{form.project_name.errors}}
                                  </span>
                                  <div class="col-md-6">
                                    <div class="form-group">
                                      <label>Key #4
                                      </label>
                                      <input type="text" class="form-control"   value="NGINX_STATIC_CONTENT_ACCESS_LOG"  name='NGINX_STATIC_CONTENT_ACCESS_LOG' disabled>
                                    </div>
                                  </div>
                                  <div class="col-md-6">
                                    <div class="form-group">
                                      <label>Value #4
                                      </label>
                                      <input type="text" class="form-control" name='NGINX_STATIC_CONTENT_ACCESS_LOG_VALUE' value='off'>
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <span style="color: red">{{form.project_name.errors}}
                                  </span>
                                  <div class="col-md-6">
                                    <div class="form-group">
                                      <label>Key #5
                                      </label>
                                      <input type="text" class="form-control"   value="NGINX_STATIC_CONTENT_EXPIRES" name='NGINX_STATIC_CONTENT_EXPIRES' disabled>
                                    </div>
                                  </div>
                                  <div class="col-md-6">
                                    <div class="form-group">
                                      <label>Value #5
                                      </label>
                                      <input type="text" class="form-control" name='NGINX_STATIC_CONTENT_EXPIRES_VALUE' value='30d'>
                                    </div>
                                  </div>
                                  

                                  

                              <div id="room_fields">                                              
                                <div class="content">
                                  <div class="row">
                
                                  </div>
                                </div>
                              </div>
                                <div class="col-md-6">
                                  <div class="form-group">
                                      <label>Extra key Value pair added</label>                                          
                                        <input type="text" class="form-control" id="total" name="total" value="0" readonly />                                  
                                  </div>
                                </div>
                                </div>
                                <div class="row">
                                <div class="col-md-3">
                                  <div class="form-group">                                          
                                        <input type="button" class="btncls" id="more_fields" onclick="add_fields();" value="Add More" />                                  
                                  </div>
                                </div>

                                </div>                          

                            </div>
   <!-- ================================STEP 3 MYSQL DETAILS================================== -->  
                            <div class="tab">MySQL
                              
                                  <div class="row">
                                      <div class="col-md-4">
                                          <div class="form-group">
                                              <label>MySQl Version</label>
                                                  <select name="mysql_version">
                                                      {% for value in data.mysql.version %}
                                                      <option value={{ value }}>{{ value }}
                                                        </option>
                                                      {% endfor %}

                                                    </select>                                                     
  
  
                                          </div>
  
                                      </div>
  
                                  </div>
                                   <div class="row">                                     
                                  </div>
                                  <div class="row">
                                    <hr>
                                  <div class="header">
                                      <h3 class="title"> Environment variables 
                                      </h3>
                                    </div>
                                  </div>
                                  <div class="row">
                                      <span style="color: red">{{form.project_name.errors}}</span>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Key #1</label>
                                              <input type="text" class="form-control" disabled  value="MYSQL_DATABASE_NAME" name='MYSQL_DATABASE_NAME_VALUE'>
                                          </div>
                                      </div>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Value #1</label>
                                              <input type="text"  class="form-control" name='MYSQL_DATABASE_NAME_VALUE' value='db'>
                                          </div>
                                      </div>
                                      
                                  </div>
                                   <div class="row">
                                      <span style="color: red">{{form.project_name.errors}}</span>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Key #2</label>
                                              <input type="text" class="form-control" disabled value="MYSQL_ROOT_PASSWORD" name='MYSQL_ROOT_PASSWORD_VALUE'>
  
                                          </div>
                                      </div>
  
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Value #2</label>
                                              <input type="text" class="form-control" name="MYSQL_ROOT_PASSWORD_VALUE" value='admin@1234'>
                                          </div>
                                      </div>
                                      
                                  </div>
                                   <div class="row">
                                      <span style="color: red">{{form.project_name.errors}}</span>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Key #3</label>
                                              <input type="text" class="form-control"   disabled value="MYSQL_USER_NAME" name="MYSQL_USER_NAME_VALUE">
  
                                          </div>
                                      </div>
  
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Value #3</label>
                                              <input type="text" class="form-control" name='MYSQL_USER_NAME_VALUE' value= {{ user.username }}>
  
                                          </div>
                                      </div>
  
                                      
                                  </div>
                                   <div class="row">
                                      <span style="color: red">{{form.project_name.errors}}</span>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Key #4</label>
                                              <input type="text" class="form-control" disabled value="MYSQL_PASSWORD" name='MYSQL_PASSWORD_VALUE'>
  
                                          </div>
                                      </div>
  
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Value #4</label>
                                              <input type="text" class="form-control" name='MYSQL_PASSWORD_VALUE' value= {{ user.username }}1234>
                                          </div>
                                      </div>
                                      
                                  </div>
                                  
                                   <!-- <div class="row">
                                      <span style="color: red">{{form.project_name.errors}}</span>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Key #5</label>
                                              <input type="text" class="form-control" disabled value="MYSQL_PORT" name='MYSQL_PORT_VALUE'>
                                          </div>
                                      </div>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Value #5</label>
                                              <input type="text" class="form-control" name='MYSQL_PORT_VALUE' value='3306' >
                                          </div>
                                      </div>
                                      
                                  </div> -->
                                   <div class="row">
                                      <span style="color: red">{{form.project_name.errors}}</span>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Key #5</label>
                                              <input type="text" class="form-control" disabled value="MYSQL_CLIENT_DEFAULT_CHARACTER_SET " name='MYSQL_CLIENT_DEFAULT_CHARACTER_SET' >
                                          </div>
                                      </div>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Value #5</label>
                                              <input type="text" class="form-control" name='MYSQL_CLIENT_DEFAULT_CHARACTER_SET_VALUE' value='utf-8'>
                                          </div>
                                      </div>
                                      
                                  </div>
                                   <!-- <div class="row">
                                      <span style="color: red">{{form.project_name.errors}}</span>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Key #7</label>
                                              <input type="text" class="form-control"  disabled value="MYSQL_DUMP_MAX_ALLOWED_PACKET" name='MYSQL_DUMP_MAX_ALLOWED_PACKET_VALUE'>
                                          </div>
                                      </div>
                                      <div class="col-md-6">
                                          <div class="form-group">
                                              <label>Value #7</label>
                                              <input type="text" class="form-control" name='MYSQL_DUMP_MAX_ALLOWED_PACKET_VALUE' placeholder='MYSQL_DUMP_MAX_ALLOWED_PACKET_VALUE'>
  
                                          </div>
                                      </div>
                                      
                                    </div>                                     -->
                                                              
                            </div>
 <!-- ================================STEP 4 MONGO DETAILS================================== -->  
                            <div class="tab">MongoDB
                                    
                                        <div class="row">
                                          <div class="col-md-4">
                                            <div class="form-group">
                                              <label>Mongo DB Version</label>
                                              <select name="mongo_version">
                               
                                                  {% for value in data.mongodb.version %}
                                                  <option value={{ value }}>{{ value }}
                                                    </option>
                                                  {% endfor %}

                                              </select>
                                            </div>
                                          </div>
                                        </div>
                                        <!-- <div class="row"></div> -->
                                        <div class="row">
                                          <hr />
                                          <div class="header">
                                            <h3 class="title">
                                              Environment variables
                                            </h3>
                                          </div>
                                        </div>
                                        <div class="row">
                                          <span style="color: red">{{form.project_name.errors}}</span>
                                          <div class="col-md-6">
                                            <div class="form-group">
                                              <label>Key #1</label> <input type="text" class=
                                              "form-control" disabled="disabled" value=
                                              "MONGO_INITDB_DATABASE" name='mongodb' />
                                            </div>
                                          </div>
                                          <div class="col-md-6">
                                            <div class="form-group">
                                              <label>Value #1</label> <input type="text" class=
                                              "form-control" name='MONGO_INITDB_DATABASE_VALUE' value='mongodb'  />
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row">
                                          <span style="color: red">{{form.project_name.errors}}</span>
                                          <div class="col-md-6">
                                            <div class="form-group">
                                              <label>Key #2</label> <input type="text" class=
                                              "form-control" disabled="disabled" value=
                                              "MONGO_INITDB_ROOT_USERNAME" name='mongouser' />
                                            </div>
                                          </div>
                                          <div class="col-md-6">
                                            <div class="form-group">
                                              <label>Value #2</label> <input type="text" class=
                                              "form-control" name='MONGO_INITDB_ROOT_USERNAME_VALUE' value='user' />
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row">
                                          <span style="color: red">{{form.project_name.errors}}</span>
                                          <div class="col-md-6">
                                            <div class="form-group">
                                              <label>Key #3</label> <input type="text" class=
                                              "form-control" disabled="disabled" value=
                                              "MONGO_INITDB_ROOT_PASSWORD" name="mongopassword" />
                                            </div>
                                          </div>
                                          <div class="col-md-6">
                                            <div class="form-group">
                                              <label>Value #3</label> <input type="text" class=
                                              "form-control" name='MONGO_INITDB_ROOT_PASSWORD_VALUE' value='1234' />
                                            </div>
                                          </div>
                                        </div>
                                        <!-- <div class="row">
                                          <span style="color: red">{{form.project_name.errors}}</span>
                                          <div class="col-md-6">
                                            <div class="form-group">
                                              <label>Key #4</label> <input type="text" class=
                                              "form-control" disabled="disabled" value="MONGO_PORT"
                                              name='mongoport' />
                                            </div>
                                          </div>
                                          <div class="col-md-6">
                                            <div class="form-group">
                                              <label>Value #4</label> <input type="text" class=
                                              "form-control" name="MONGO_PORT_VALUE" value'27017'= />
                                            </div>
                                          </div>
                                        </div> -->
                                      
                              </div>
 <!-- ================================STEP 5 VARNISH DETAILS================================== -->  
                            <div class="tab">Varnish      
                                  <div class="row">
                                    <div class="col-md-4">
                                      <div class="form-group">
                                      <label>Varnish Version
                                      </label>

                                      <select name="varnish_version">
                                  
                                          {% for value in data.varnish.version %}
                                          <option value={{ value }}>{{ value }}
                                            </option>
                                          {% endfor %}

                                        </select>
                                    </div>
                                  </div>
                                  </div>
                                  <div class="row">
                                    <hr>
                                    <div class="header">
                                      <h3 class="title"> Environment variables 
                                      </h3>
                                    </div>
                                  </div>
                                  
                                  <div class="row">
                                    <span style="color: red">{{form.project_name.errors}}
                                    </span>
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label>Key #1
                                        </label>
                                        <input type="text" class="form-control" placeholder="VARNISH_BACKEND_HOST" disabled name='VARNISH_BACKEND_HOST_VALUE'>
                                      </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label>Value #1
                                        </label>
                                        <input type="text" class="form-control" name='VARNISH_BACKEND_HOST_VALUE' value='nginx_php'>
                                      </div>
                                    </div>
                                  </div>
                                  <div class="row">
                                    <span style="color: red">{{form.project_name.errors}}
                                    </span>
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label>Key #2
                                        </label>
                                        <input type="text" class="form-control" placeholder="VARNISH_BACKEND_PORT" name='VARNISH_BACKEND_PORT_VALUE' disabled>
                                      </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label>Value #2
                                        </label>
                                        <input type="text" class="form-control" name='VARNISH_BACKEND_PORT_VALUE' value='80'>
                                      </div>
                                    </div>
                                  </div>
                                  <!-- <div class="row">
                                    <span style="color: red">{{form.project_name.errors}}
                                    </span>
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label>Key #3
                                        </label>
                                        <input type="text" class="form-control" disabled  placeholder="VARNISH_SECRET" name='VARNISH_SECRET_VALUE'>
                                      </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label>Value #3
                                        </label>
                                        <input type="text" class="form-control" name='VARNISH_SECRET_VALUE' placeholder='VARNISH_SECRET_VALUE'>
                                      </div>
                                    </div>
                                  </div> -->
                                  <div class="row">
                                    <span style="color: red">{{form.project_name.errors}}
                                    </span>
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label>Key #3
                                        </label>
                                        <input type="text" class="form-control"   placeholder="VARNISH_PORT" name='VARNISH_PORT_VALUE' disabled>
                                      </div>
                                    </div>
                                    <div class="col-md-6">
                                      <div class="form-group">
                                        <label>Value #3
                                        </label>
                                        <input type="text" class="form-control" name='VARNISH_PORT_VALUE' value='6081'>
                                      </div>
                                    </div>
                                  </div>
                                  </div>
   <!-- ================================STEP 6 REDIS DETAILS================================== -->  
                            <div class="tab">Redis
                                
                                    <div class="row">
                                      <div class="col-md-4">
                                        <div class="form-group">
                                          <label>Redis Version
                                          </label>
                                          <select name="redis_version">
                                         
                                              {% for value in data.redis.version %}
                                              <option value={{ value }}>{{ value }}
                                                </option>
                                              {% endfor %}

                                            </select>                       
                                  </div>
                                  </div>                                
                                  </div>
                                  <div class="row">
                                  <div class="header">
                                      <h3 class="title"> Environment variables 
                                      </h3>
                                    </div>
                                    </div>
  
                                  <div class="row">
                                      <span style="color: red">{{form.project_name.errors}}
                                      </span>
                                      <div class="col-md-6">
                                        <div class="form-group">
                                          <label>Key #1
                                          </label>
                                          <input type="text" class="form-control" disabled  placeholder="Environment Key" value="REDIS_PASSWORD" name='REDIS_PASSWORD_VALUE'>
                                        </div>
                                      </div>
                                      <div class="col-md-6">
                                        <div class="form-group">
                                          <label>Value #1
                                          </label>
                                          <input type="text" class="form-control" name='REDIS_PASSWORD_VALUE' placeholder='REDIS_PASSWORD_VALUE'>
                                        </div>
                                      </div>
                                    
                                   
                                  </div>
                                                               
                            </div>

{% endblock %}

 
                           
